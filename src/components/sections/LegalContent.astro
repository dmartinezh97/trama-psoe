---
import FooterVisual from './FooterVisual.astro';

interface TableData {
  headers: string[];
  rows: string[][];
}

interface Section {
  title: string;
  content: string;
  highlighted?: boolean;
  table?: TableData;
}

interface Props {
  title: string;
  sections: Section[];
  backLink: string;
  backText: string;
  lastUpdated: string;
}

const { title, sections, backLink, backText, lastUpdated } = Astro.props;
---

<main class="bg-trama-950 min-h-screen">
  <!-- Header spacing -->
  <div class="h-20 md:h-24"></div>

  <div class="max-w-[1200px] mx-auto px-5 md:px-8 py-12 md:py-16">
    <!-- Back link -->
    <a
      href={backLink}
      class="inline-flex items-center gap-2 text-trama-red hover:text-trama-red-light transition-colors mb-8 group"
    >
      <svg class="w-4 h-4 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
      <span class="font-secondary text-sm">{backText}</span>
    </a>

    <!-- Title -->
    <h1 class="font-secondary text-3xl md:text-4xl lg:text-5xl font-black text-white mb-12">
      {title}
    </h1>

    <!-- Sections -->
    <div class="space-y-8 md:space-y-10">
      {sections.map((section) => (
        <section
          class={`border-l-2 pl-5 md:pl-6 ${
            section.highlighted
              ? 'border-trama-red bg-trama-red/5 py-4 pr-4 md:pr-6 -ml-4 md:-ml-6 rounded-r-lg'
              : 'border-trama-800'
          }`}
        >
          <h2 class={`font-secondary text-lg md:text-xl font-bold mb-3 ${
            section.highlighted ? 'text-trama-red' : 'text-white'
          }`}>
            {section.title}
          </h2>

          <div class="font-secondary text-sm md:text-base text-trama-300 leading-relaxed whitespace-pre-line">
            {section.content}
          </div>

          {section.table && (
            <div class="mt-4 overflow-x-auto">
              <table class="w-full text-sm">
                <thead>
                  <tr class="border-b border-trama-800">
                    {section.table.headers.map((header) => (
                      <th class="font-secondary font-semibold text-white text-left py-2 pr-4">
                        {header}
                      </th>
                    ))}
                  </tr>
                </thead>
                <tbody>
                  {section.table.rows.map((row) => (
                    <tr class="border-b border-trama-800/50">
                      {row.map((cell) => (
                        <td class="font-secondary text-trama-300 py-2 pr-4">
                          {cell}
                        </td>
                      ))}
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}
        </section>
      ))}
    </div>

    <!-- Last updated -->
    <div class="mt-12 pt-8 border-t border-trama-800">
      <p class="font-secondary text-xs text-trama-500">
        {lastUpdated}
      </p>
    </div>
  </div>

  <FooterVisual />
</main>
