---
import ScrollHint from '../ui/ScrollHint.astro';
import { getLocaleFromUrl, useTranslations, getLocalizedPath } from '../../i18n/utils';
import type { Locale } from '../../i18n/translations';

const locale = getLocaleFromUrl(Astro.url) as Locale;
const t = useTranslations(locale);
const otherLocale: Locale = locale === 'es' ? 'en' : 'es';
---

<section class="relative h-[900px] bg-white overflow-hidden">
  <!-- Background Year -->
  <span class="absolute right-[-100px] top-[-150px] font-secondary text-[400px] md:text-[600px] lg:text-[800px] font-black text-trama-50 select-none pointer-events-none tracking-[-40px] leading-none">
    26
  </span>

  <!-- TopBar -->
  <header class="absolute top-0 left-0 w-full h-20 bg-trama-red flex items-center justify-between px-8 md:px-14 z-10">
    <div class="flex items-center gap-3">
      <div class="w-8 h-8 bg-white flex items-center justify-center">
        <span class="font-secondary text-xl font-black text-trama-red">T</span>
      </div>
      <span class="font-secondary text-sm font-extrabold tracking-[2px] text-white">
        {t.hero.brand}
      </span>
    </div>
    <nav class="hidden md:flex items-center gap-8">
      <a href="#cases" class="font-secondary text-xs font-semibold tracking-[1px] text-white hover:text-trama-red-light transition-colors">
        {t.nav.cases}
      </a>
      <a href="#protagonists" class="font-secondary text-xs font-semibold tracking-[1px] text-trama-red-light hover:text-white transition-colors">
        {t.nav.accused}
      </a>
      <a href="#timeline" class="font-secondary text-xs font-semibold tracking-[1px] text-trama-red-light hover:text-white transition-colors">
        {t.nav.timeline}
      </a>
      <a href="#" class="font-secondary text-xs font-semibold tracking-[1px] text-trama-red-light hover:text-white transition-colors">
        {t.nav.documents}
      </a>
      <a
        href={getLocalizedPath(Astro.url.pathname, otherLocale)}
        class="font-secondary text-xs font-semibold tracking-[1px] text-white border border-white/30 px-3 py-1.5 hover:bg-white/10 transition-colors"
      >
        {otherLocale.toUpperCase()}
      </a>
    </nav>
  </header>

  <!-- Main Content -->
  <div class="absolute top-[180px] left-8 md:left-14 right-8 md:right-14 flex flex-col lg:flex-row lg:items-end lg:justify-between gap-8 lg:gap-0">
    <!-- Left Column -->
    <div class="flex flex-col gap-8 max-w-[700px]">
      <!-- Tagline -->
      <div class="flex items-center gap-4">
        <span class="w-3 h-3 rounded-full bg-trama-red"></span>
        <span class="font-secondary text-xs font-semibold tracking-[2px] text-trama-400">
          {t.hero.tagline}
        </span>
      </div>

      <!-- Title Block -->
      <div class="flex flex-col">
        <span class="font-secondary text-[80px] md:text-[120px] lg:text-[180px] font-black tracking-[-4px] md:tracking-[-8px] leading-[0.85] text-black">
          {t.hero.titleLine1}
        </span>
        <span class="font-secondary text-[80px] md:text-[120px] lg:text-[180px] font-black tracking-[-4px] md:tracking-[-8px] leading-[0.85] text-black">
          {t.hero.titleLine2}
        </span>
        <span class="font-secondary text-[80px] md:text-[120px] lg:text-[180px] font-black tracking-[-4px] md:tracking-[-8px] leading-[0.85] text-trama-red">
          {t.hero.titleLine3}
        </span>
      </div>

      <!-- Subtitle -->
      <p class="font-secondary text-base md:text-lg font-medium tracking-[1px] leading-relaxed text-trama-500 max-w-[500px] whitespace-pre-line">
        {t.hero.subtitle}
      </p>
    </div>

    <!-- Right Column -->
    <div class="flex flex-col items-end gap-8">
      <!-- Stats Grid -->
      <div class="flex flex-col">
        <div class="flex items-center gap-4 py-4 border-b border-trama-200 w-[300px] md:w-[350px]">
          <span class="font-secondary text-4xl md:text-5xl font-black text-trama-red">{t.hero.stat1.number}</span>
          <span class="font-secondary text-xs font-semibold tracking-[1px] text-trama-500">{t.hero.stat1.label}</span>
        </div>
        <div class="flex items-center gap-4 py-4 border-b border-trama-200 w-[300px] md:w-[350px]">
          <span class="font-secondary text-4xl md:text-5xl font-black text-trama-red">{t.hero.stat2.number}</span>
          <span class="font-secondary text-xs font-semibold tracking-[1px] text-trama-500">{t.hero.stat2.label}</span>
        </div>
        <div class="flex items-center gap-4 py-4 w-[300px] md:w-[350px]">
          <span class="font-secondary text-4xl md:text-5xl font-black text-trama-red">{t.hero.stat3.number}</span>
          <span class="font-secondary text-xs font-semibold tracking-[1px] text-trama-500">{t.hero.stat3.label}</span>
        </div>
      </div>

      <!-- CTA Button -->
      <a
        href="#cases"
        class="bg-trama-red text-white px-8 py-5 flex items-center gap-3 hover:bg-trama-red-dark transition-colors"
      >
        <span class="font-secondary text-[13px] font-bold tracking-[1px]">{t.hero.cta}</span>
        <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </a>
    </div>
  </div>

  <!-- Decorative Line -->
  <div class="absolute bottom-[50px] left-8 md:left-14 w-[200px] h-1 bg-trama-red"></div>

  <!-- Scroll Hint -->
  <div class="absolute bottom-[60px] left-1/2 -translate-x-1/2">
    <ScrollHint text={t.hero.scroll} />
  </div>
</section>
